<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Load Game</title>
    <link rel="stylesheet" href="style.css" type="text/css">
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#750101"> <!--change color of text in tabs-->
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#750101"> <!--change color of text in tabs-->
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-status-bar-style" content="#750101"> <!--change color of text in tabs-->
    <title>The Quest</title>
    <link rel="icon" href="assets\icons\main\web_icon.svg" type="image/icon type">  <!-- links icon to website-->
    <link rel="preconnect" href="https://fonts.googleapis.com"> <!--Fonts-->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>  <!--Fonts-->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet"> <!--Fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com"> <!--Fonts-->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>  <!--Fonts-->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel&family=Orbitron&display=swap" rel="stylesheet"> <!--Fonts-->
    <script src="code.js"></script>
    <script src="main.js"></script>
    <style>
        *{
box-sizing: border-box;
position:relative;
cursor: default;
user-select: none;
font-family: 'Orbitron', sans-serif;
text-decoration: none;

}
*:visited{
    color: inherit;
}
*:link{
    color: inherit;
}
html{
text-align: center;
overflow: hidden;
background-color:#232530;
}
#detach-button-host {
display: none !important;
}
    </style>
</head>
<body> 
    <h1>Save Game</h1>
    <a href="./Game0Story.html" id="a_back" class="back" role="button" onclick="go_back()" aria-label="back-button">Back</a>
    <a href="/" id="a_backMain" class="back prprp" role="button" onclick="go_back()" aria-label="back-button">Main menu</a>
    <table class="tabletable">

        <tbody class="Allsection">
            <tr class="sectionNULL">
                <th class="Num1"><h5>#</h5></th>
                <th class="SaveGameH">Save</th>
                <th class="load_gameSH">load</th>
                <th class="Th_NameH">ID / Name</th>
                <th class="Del_gameH">Delete</th>
            </tr>
            <tr class="section0">
                <th class="Num1"><h5>1</h5></th>
                <th class="SaveGame"><button class="Section0_Save_Game BtnTable" onclick="save_game(1)">Save Game</button></th>
                <th class="load_gameS"><button class="Section0_load_game BtnTable" onclick="Load_game(1)">load Game</button></th>
                <th class="Th_Name"><span class="Section0_Name  SpanSName0" id="Section0_Name"></span></th>
                <th class="Del_game"><button class="Section0_Del_G BtnTable DEl" onclick="DEL_game(1)">Delete Game</button></th>
            </tr>
            <tr class="section1">
                <th class="Num1"><h5>2</h5></th>
                <th class="SaveGame"><button class="Section1_Save_Game BtnTable" onclick="save_game(2)">Save Game</button></th>
                <th class="load_gameS"><button class="Section1_load_game BtnTable" onclick="Load_game(2)">load Game</button></th>
                <th class="Th_Name"><span class="Section1_Name SpanSName1" id="Section1_Name"></span></th>
                <th class="Del_game"><button class="Section1_Del_G BtnTable DEl" onclick="DEL_game(2)">Delete Game</button></th>
            </tr>
            <tr class="section2">
                <th class="Num1"><h5>3</h5></th>
                <th class="SaveGame"><button class="Section2_Save_Game BtnTable" onclick="save_game(3)">Save Game</button></th>
                <th class="load_gameS"><button class="Section2_load_game BtnTable" onclick="Load_game(3)">load Game</button></th>
                <th class="Th_Name"><span class="Section2_Name SpanSName2" id="Section2_Name"></span></th>
                <th class="Del_game"><button class="Section2_Del_G BtnTable DEl" onclick="DEL_game(3)">Delete Game</button></th>
            </tr>
            <tr class="section3">
                <th class="Num1"><h5>4</h5></th>
                <th class="SaveGame"><button class="Section3_Save_Game BtnTable" onclick="save_game(4)">Save Game</button></th>
                <th class="load_gameS"><button class="Section3_load_game BtnTable" onclick="Load_game(4)">load Game</button></th>
                <th class="Th_Name"><span class="Section3_Name SpanSName3" id="Section3_Name"></span></th>
                <th class="Del_game"><button class="Section0_Del_G BtnTable DEl" onclick="DEL_game(4)">Delete Game</button></th>
            </tr>
            <tr class="section4">
                <th class="Num1"><h5>5</h5></th>
                <th class="SaveGame"><button class="Section4_Save_Game BtnTable" onclick="save_game(5)">Save Game</button></th>
                <th class="load_gameS"><button class="Section4_load_game BtnTable" onclick="Load_game(5)">load Game</button></th>
                <th class="Th_Name"><span class="Section4_Name  SpanSName4" id="Section4_Name"></span></th>
                <th class="Del_game"><button class="Section4_Del_G BtnTable DEl" onclick="DEL_game(5)">Delete Game</button></th>
            </tr>
        </tbody>
    </table>
</body>
<script src="code.js"></script>
<script src="main.js"></script>
<script src="/games/G3/scripts.js"></script>
<script lang="js">

    //--------------------- telse a basis
    var i = 1;
    var o = 1;
    var gameItem1 = 0;

        
    
    //console.log(LocalStorageS);
    //--------------------- on load page => do gameload
    window.addEventListener("load", function () {
        gameLoad();
    });

    //--------------------- if storedI do not exist => do I = 1
    const storedI = localStorage.getItem('storedI');

    if(localStorage.length >=1){                                   //change in time the length of the span-------------------------

        // ---------------------make sure storedI is number not string /*AND*\ set i to storedI + 1
        console.log(storedI+' stored I in script ');
        var str = 1;
        i = 1+parseInt(storedI);
        console.log(typeof storedI);
        console.log(i+' i in script');
        console.log('localStorage');
    }

    else{
        storedI == 1;
        var i = 1;
        console.log("no localStorage");
        console.log(i+' is i');
    }


    

    


    console.log(i+' idk');


//---------------------function calld on click of save_game 

    function save_game(NUM){
        //--------------------Set basis variable
        let NUMm = NUM-1;
        const btnName = document.querySelector(".Section"+NUMm+"_Name");
        const btnSave = document.querySelector(".Section"+NUMm+"_Save_Game");
        const StoredInput = localStorage.getItem( NUMm);
        const storedI = localStorage.getItem('storedI');

        //--------------------- makes i again
        if(localStorage.length >=2){
        // ---------------------make sure storedI is number not string /*AND*\ set i to storedI + 1 
        var str = 1;
        i = 1+parseInt(storedI);
        }
        else{
        let storedI = 1;
        var i = 1;
        //document.getElementById("Section"+NUMm+"_Name").innerHTML = "";
        }

        //---------------------Sync localStorage with current i
        let saveI = localStorage.getItem('storedI');
        let Save1 = localStorage.getItem('SaveFile0');
        let Save2 = localStorage.getItem('SaveFile1');
        let Save3 = localStorage.getItem('SaveFile2');
        let Save4 = localStorage.getItem('SaveFile3');
        let Save5 = localStorage.getItem('SaveFile4');
        switch(NUMm){
            case 0:
                o = i;
                console.log(Save1);
            break;
            case 1:
                o = i;
                console.log(Save2);
            break;
            case 2:
                o = i;
            console.log(Save3);
            break;
            case 3:
                o = i;
            console.log(Save4);
            break;
            case 4:
                o = i;
            console.log(Save5);
            break;
        }

        
        // scripts G3
        savefile()

        
        //---------------------Set span page to i
        if(i){
            document.getElementById("Section"+NUMm+"_Name").innerHTML = "save "+i;
        }
        if (localStorage.getItem('saveFileG3 '+saveFileNum)){
            document.getElementById("Section"+NUMm+"_Name").innerHTML = "saveG3 "+i;
            
        }else{
            document.getElementById("Section"+NUMm+"_Name").innerHTML = ' ';
        }


        //---------------------Set localStorage to NUMm and storedi to o and i AND to gameItem1 
        const saveToLocalStorage = () => {
            localStorage.setItem( 'SaveFile'+NUMm,o);
            localStorage.setItem('storedI',i);
            //localStorage.setItem(NUMm+" main",gameItem1); //makes a real game save of the game
        }



        saveToLocalStorage();
        //--------------------add comments to i
        console.log(i+' i in savegame before i++');
        //--------------------- add 1 to o and i
        i++;
        o++;
        //--------------------add comments to i and NUM
        console.log(i+' i in savegame after i++');

        console.log("saving game "+ NUM);
    }
    //--------------------function calld  on page load
    function gameLoad(NUM){
        //--------------------Set basis variable
        let NUMm = NUM-1;
        /*const btnName = document.querySelector(".Section"+NUMm+"_Name");
        const btnname = document.getElementById("Section"+NUMm+"_Name");
        const btnSave = document.querySelector(".Section"+NUMm+"_Save_Game");
        const StoredInput = localStorage.getItem( NUMm);
        const storedI = localStorage.getItem('storedI');*/

        //btnname.innerHTML = StoredInput;

        //---------------------Set span to localStorage

        if(localStorage.length >1){                         //change in time the length of the span-------------------------
        saveI = localStorage.getItem('storedI');

        let Save1 = localStorage.getItem('SaveFile'+0);
        let Save2 = localStorage.getItem('SaveFile'+1);
        let Save3 = localStorage.getItem('SaveFile'+2);
        let Save4 = localStorage.getItem('SaveFile'+3);
        let Save5 = localStorage.getItem('SaveFile'+4);
        
        /*document.getElementById("Section0_Name").innerHTML = 'save '+Save1;
        document.getElementById("Section1_Name").innerHTML = 'save '+Save2;
        document.getElementById("Section2_Name").innerHTML = 'save '+Save3;
        document.getElementById("Section3_Name").innerHTML = 'save '+Save4;
        document.getElementById("Section4_Name").innerHTML = 'save '+Save5;
        */

        if(Object.is(localStorage.getItem('SaveFile'+0), null)){
            document.getElementById("Section0_Name").innerHTML = '';
            console.log('save null of 0 gone');
        }else{document.getElementById("Section0_Name").innerHTML ='save '+Save1;console.log('save1 succeeded');}
        if(Object.is(localStorage.getItem('SaveFile'+1), null)){
            document.getElementById("Section1_Name").innerHTML = '';
            console.log('save null of 1 gone');
        }else{document.getElementById("Section1_Name").innerHTML = 'save '+Save2;console.log('save2 succeeded');}
        if(Object.is(localStorage.getItem('SaveFile'+2), null)){
            document.getElementById("Section2_Name").innerHTML = '';
            console.log('save null of 2 gone');
        }else{document.getElementById("Section2_Name").innerHTML ='save '+Save3;console.log('save3 succeeded');}
        if(Object.is(localStorage.getItem('SaveFile'+3), null)){
            document.getElementById("Section3_Name").innerHTML = '';
            console.log('save null of 3 gone');
        }else{document.getElementById("Section3_Name").innerHTML = 'save '+Save4;console.log('save4 succeeded');}
        if(Object.is(localStorage.getItem('SaveFile'+4), null)){
            document.getElementById("Section4_Name").innerHTML = '';
            console.log('save null of 4 gone');
        }else{document.getElementById("Section4_Name").innerHTML ='save '+Save5;console.log('save5 succeeded');}

        }
        else{document.getElementById("Section"+NUMm+"_Name").innerHTML = '';}



        //---------------------set i from localStorage
        i = saveI;

        //---------------------documents me of the localStorage
        console.log(localStorage);
        console.log('SaveFile'+0);
        //---------------------documents me of the localStorage NUMm
        console.log(i+' i in gameLoad');
    }
    function Load_game(NUM){
        //--------------------Set basis variable

        NUMm = NUM-1;
        //put here code to load_game-----------------------------------------------------------------------



        //remember 'save+i'
        
        console.log("Loading game "+ NUM);

        // loading G3

        loadGame()

    }
    function DEL_game(NUM){
        //--------------------Set basis variable
        NUMm = NUM-1;
        //--------------------Set span to nothing
        document.getElementById("Section"+NUMm+"_Name").innerHTML = "";

        //---------------------Set all localStorages to empty
        localStorage.removeItem( 'SaveFile'+NUMm,o);
        //localStorage.removeItem(NUMm+" main",gameItem1);


        console.log("deleting game "+NUM);
        if(localStorage.length <=2){
            localStorage.removeItem('storedI',i);
        }
    }

</script>

</html>